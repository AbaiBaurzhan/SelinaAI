# ๐ BotCraft Multi-Channel Setup Guide

## ๐ ะะฑะทะพั ะฝะพะฒะพะน ะฐััะธัะตะบัััั

BotCraft ัะตะฟะตัั ะฟะพะดะดะตัะถะธะฒะฐะตั **ััะธ ะบะฐะฝะฐะปะฐ ัะฒัะทะธ** ั ะตะดะธะฝัะผ FastAPI-ะฑัะบะตะฝะดะพะผ:

1. **๐ฑ Telegram** - ะผะตัะฐ-ะฑะพั ะฒะปะฐะดะตะปััะฐ (polling ะฒ dev, webhook ะฒ prod)
2. **๐ฌ WhatsApp Business** - ะฟัะธัะผ/ะพัะฒะตั ัะตัะตะท ะฒะตะฑััะบะธ Meta
3. **๐ธ Instagram DM** - ะฟัะธัะผ ะฒัะพะดััะธั ัะตัะตะท ะฒะตะฑััะบะธ, ะพัะฟัะฐะฒะบะฐ ั ะฟัะพะฒะตัะบะพะน ัะฐะทัะตัะตะฝะธะน

## ๐๏ธ ะััะธัะตะบัััะฐ ัะธััะตะผั

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   Telegram      โ    โ   WhatsApp       โ    โ   Instagram     โ
โ   Channel       โ    โ   Channel        โ    โ   Channel       โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
         โ                       โ                       โ
         โโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโ
                                 โ
                    โโโโโโโโโโโโโโโโโโโโ
                    โ  Channel Manager โ
                    โโโโโโโโโโโโโโโโโโโโ
                                 โ
                    โโโโโโโโโโโโโโโโโโโโ
                    โ   FastAPI App    โ
                    โ  + Webhooks      โ
                    โโโโโโโโโโโโโโโโโโโโ
                                 โ
                    โโโโโโโโโโโโโโโโโโโโ
                    โ   RAG System     โ
                    โ  + AI Processing โ
                    โโโโโโโโโโโโโโโโโโโโ
```

## ๐ ะกัััะบัััะฐ ัะฐะนะปะพะฒ

```
bot_constructor/
โโโ channels/                 # ะะพะดัะปั ะบะฐะฝะฐะปะพะฒ
โ   โโโ __init__.py          # ะะฝะธัะธะฐะปะธะทะฐัะธั ะผะพะดัะปั
โ   โโโ base.py              # ะะฐะทะพะฒัะน ะบะปะฐัั ะบะฐะฝะฐะปะฐ
โ   โโโ telegram.py          # Telegram ะบะฐะฝะฐะป
โ   โโโ whatsapp.py          # WhatsApp ะบะฐะฝะฐะป
โ   โโโ instagram.py         # Instagram ะบะฐะฝะฐะป
โ   โโโ manager.py           # ะะตะฝะตะดะถะตั ะบะฐะฝะฐะปะพะฒ
โโโ app.py                   # ะะฑะฝะพะฒะปะตะฝะฝัะน FastAPI ั ะฟะพะดะดะตัะถะบะพะน ะบะฐะฝะฐะปะพะฒ
โโโ run_dev_multi.py         # ะะพะฒัะน runner ะดะปั multi-channel
โโโ touch.env                # ะะพะฝัะธะณััะฐัะธั ะฒัะตั ะบะฐะฝะฐะปะพะฒ
โโโ webapp/
    โโโ index.html           # ะะฑะฝะพะฒะปะตะฝะฝัะน WebApp ะธะฝัะตััะตะนั
```

## ๐ง ะะฐัััะพะนะบะฐ ะพะบััะถะตะฝะธั

### 1. ะะฑะฝะพะฒะธัะต touch.env

```bash
# Telegram Bot Configuration
TELEGRAM_TOKEN=your_telegram_bot_token_here
TELEGRAM_WEBHOOK_MODE=false

# WebApp URL ะดะปั ะปะพะบะฐะปัะฝะพะน ัะฐะทัะฐะฑะพัะบะธ
WEBAPP_URL=https://your-ngrok-url.ngrok-free.app

# OpenAI API Configuration
OPENAI_API_KEY=your_openai_api_key_here

# WhatsApp Business API Configuration
WHATSAPP_ACCESS_TOKEN=your_whatsapp_access_token_here
WHATSAPP_PHONE_NUMBER_ID=your_whatsapp_phone_number_id_here
WHATSAPP_VERIFY_TOKEN=your_whatsapp_verify_token_here
WHATSAPP_APP_SECRET=your_whatsapp_app_secret_here

# Instagram Business API Configuration
INSTAGRAM_ACCESS_TOKEN=your_instagram_access_token_here
INSTAGRAM_BUSINESS_ACCOUNT_ID=your_instagram_business_account_id_here
INSTAGRAM_PAGE_ID=your_instagram_page_id_here
INSTAGRAM_VERIFY_TOKEN=your_instagram_verify_token_here
```

### 2. ะะพะปััะตะฝะธะต ัะพะบะตะฝะพะฒ ะธ ะบะปััะตะน

#### Telegram Bot
1. ะกะพะทะดะฐะนัะต ะฑะพัะฐ ัะตัะตะท @BotFather
2. ะะพะปััะธัะต ัะพะบะตะฝ
3. ะะปั ะฟัะพะดะฐะบัะตะฝะฐ ะฝะฐัััะพะนัะต webhook

#### WhatsApp Business
1. ะกะพะทะดะฐะนัะต ะฟัะธะปะพะถะตะฝะธะต ะฒ [Meta Developer Console](https://developers.facebook.com/)
2. ะะพะฑะฐะฒััะต WhatsApp Business API
3. ะะพะปััะธัะต Access Token, Phone Number ID
4. ะกะพะทะดะฐะนัะต Verify Token ะธ App Secret

#### Instagram Business
1. ะ ัะพะผ ะถะต Meta ะฟัะธะปะพะถะตะฝะธะธ ะดะพะฑะฐะฒััะต Instagram Basic Display
2. ะะพะปััะธัะต Access Token
3. ะะฐะนะดะธัะต Instagram Business Account ID ะธ Page ID
4. ะกะพะทะดะฐะนัะต Verify Token

## ๐ ะะฐะฟััะบ ัะธััะตะผั

### 1. ะะฐะฟััะบ ัะตัะตะท ะฝะพะฒัะน runner

```bash
cd bot_constructor
source ../.venv/bin/activate
python run_dev_multi.py
```

### 2. ะััะฝะพะน ะทะฐะฟััะบ

```bash
# ะะฐะฟััะบ ngrok
ngrok http 8000

# ะ ะดััะณะพะผ ัะตัะผะธะฝะฐะปะต
cd bot_constructor
source ../.venv/bin/activate
python -m uvicorn app:app --host 127.0.0.1 --port 8000 --reload
```

## ๐ Webhook URLs

ะะพัะปะต ะทะฐะฟััะบะฐ ัะธััะตะผะฐ ะฟัะตะดะพััะฐะฒะธั ัะปะตะดัััะธะต webhook URLs:

- **Telegram**: `https://your-domain.com/webhook/telegram`
- **WhatsApp**: `https://your-domain.com/webhook/whatsapp`
- **Instagram**: `https://your-domain.com/webhook/instagram`

## ๐ฑ ะะฐัััะพะนะบะฐ ะบะฐะฝะฐะปะพะฒ

### Telegram
- **ะะตะถะธะผ ัะฐะทัะฐะฑะพัะบะธ**: Polling (ะฐะฒัะพะผะฐัะธัะตัะบะธ)
- **ะะตะถะธะผ ะฟัะพะดะฐะบัะตะฝะฐ**: Webhook (ัััะฐะฝะพะฒะธัะต TELEGRAM_WEBHOOK_MODE=true)

### WhatsApp
1. ะ Meta Developer Console ะฝะฐัััะพะนัะต webhook URL
2. ะฃะบะฐะถะธัะต Verify Token
3. ะกะธััะตะผะฐ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะพะฑัะฐะฑะพัะฐะตั ะฒะตัะธัะธะบะฐัะธั

### Instagram
1. ะ Meta Developer Console ะฝะฐัััะพะนัะต webhook URL
2. ะฃะบะฐะถะธัะต Verify Token
3. ะกะธััะตะผะฐ ะฟัะพะฒะตัะธั ัะฐะทัะตัะตะฝะธั ะธ ะฝะฐัััะพะธั ะดะพัััะฟ

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

### 1. ะัะพะฒะตัะบะฐ ััะฐัััะฐ ะบะฐะฝะฐะปะพะฒ

```bash
curl http://127.0.0.1:8000/channels/status
```

### 2. ะขะตัั ัะตัะตะท WebApp
- ะัะบัะพะนัะต WebApp ะธะฝัะตััะตะนั
- ะะฐะถะผะธัะต "๐งช ะขะตัั ะบะฐะฝะฐะปะพะฒ"
- ะะฐะถะผะธัะต "๐ ะะพะปััะธัั Webhook URLs"

### 3. ะขะตัั ะพัะฟัะฐะฒะบะธ ัะพะพะฑัะตะฝะธะน

```bash
# ะัะฟัะฐะฒะบะฐ ะฒ ะบะพะฝะบัะตัะฝัะน ะบะฐะฝะฐะป
curl -X POST http://127.0.0.1:8000/api/send_message \
  -H "Content-Type: application/json" \
  -d '{"channel": "telegram", "chat_id": "123", "content": "ะขะตัั"}'

# ะัะฟัะฐะฒะบะฐ ะฒะพ ะฒัะต ะบะฐะฝะฐะปั
curl -X POST http://127.0.0.1:8000/api/send_message_all \
  -H "Content-Type: application/json" \
  -d '{"chat_id": "123", "content": "ะขะตัั ะฒัะตะผ ะบะฐะฝะฐะปะฐะผ"}'
```

## ๐ ะฃะฟัะฐะฒะปะตะฝะธะต ะบะฐะฝะฐะปะฐะผะธ

### API ัะฝะดะฟะพะธะฝัั

- `GET /channels/status` - ััะฐััั ะฒัะตั ะบะฐะฝะฐะปะพะฒ
- `POST /channels/start` - ะทะฐะฟััะบ ะฒัะตั ะบะฐะฝะฐะปะพะฒ
- `POST /channels/stop` - ะพััะฐะฝะพะฒะบะฐ ะฒัะตั ะบะฐะฝะฐะปะพะฒ
- `POST /api/send_message` - ะพัะฟัะฐะฒะบะฐ ะฒ ะบะพะฝะบัะตัะฝัะน ะบะฐะฝะฐะป
- `POST /api/send_message_all` - ะพัะฟัะฐะฒะบะฐ ะฒะพ ะฒัะต ะบะฐะฝะฐะปั

### Webhook ัะฝะดะฟะพะธะฝัั

- `GET/POST /webhook/telegram` - Telegram webhook
- `GET/POST /webhook/whatsapp` - WhatsApp webhook
- `GET/POST /webhook/instagram` - Instagram webhook

## ๐ฏ ะัะพะฑะตะฝะฝะพััะธ ัะตะฐะปะธะทะฐัะธะธ

### Telegram Channel
- โ Polling ัะตะถะธะผ ะดะปั ัะฐะทัะฐะฑะพัะบะธ
- โ Webhook ัะตะถะธะผ ะดะปั ะฟัะพะดะฐะบัะตะฝะฐ
- โ ะะฒัะพะผะฐัะธัะตัะบะพะต ะฟะตัะตะบะปััะตะฝะธะต ัะตะถะธะผะพะฒ
- โ ะะพะดะดะตัะถะบะฐ ะฒัะตั ัะธะฟะพะฒ ัะพะพะฑัะตะฝะธะน

### WhatsApp Channel
- โ ะะตัะธัะธะบะฐัะธั webhook ัะตัะตะท Meta API
- โ ะัะพะฒะตัะบะฐ ะฟะพะดะฟะธัะธ ะดะปั ะฑะตะทะพะฟะฐัะฝะพััะธ
- โ ะะฑัะฐะฑะพัะบะฐ ะฒัะตั ัะธะฟะพะฒ ัะพะพะฑัะตะฝะธะน
- โ ะะฒัะพะผะฐัะธัะตัะบะฐั ะพัะฟัะฐะฒะบะฐ ะพัะฒะตัะพะฒ

### Instagram Channel
- โ ะัะพะฒะตัะบะฐ ัะฐะทัะตัะตะฝะธะน ัะตัะตะท Graph API
- โ ะคัะฝะบัะธั-ะพะฑัััะบะฐ ะดะปั ะพัะฟัะฐะฒะบะธ
- โ Fallback ะฟัะธ ะพััััััะฒะธะธ ัะฐะทัะตัะตะฝะธะน
- โ ะะพะดะดะตัะถะบะฐ Direct Messages

## ๐จ ะฃัััะฐะฝะตะฝะธะต ะฝะตะฟะพะปะฐะดะพะบ

### ะะฐะฝะฐะป ะฝะต ะทะฐะฟััะบะฐะตััั
1. ะัะพะฒะตัััะต ัะพะบะตะฝั ะฒ touch.env
2. ะฃะฑะตะดะธัะตัั, ััะพ API ะดะพัััะฟะฝั
3. ะัะพะฒะตัััะต ะปะพะณะธ ะฒ ะบะพะฝัะพะปะธ

### Webhook ะฝะต ัะฐะฑะพัะฐะตั
1. ะัะพะฒะตัััะต URL ะฒ ะฝะฐัััะพะนะบะฐั Meta
2. ะฃะฑะตะดะธัะตัั, ััะพ ngrok ะทะฐะฟััะตะฝ
3. ะัะพะฒะตัััะต ะฒะตัะธัะธะบะฐัะธั ัะพะบะตะฝะพะฒ

### ะัะธะฑะบะธ ะพัะฟัะฐะฒะบะธ
1. ะัะพะฒะตัััะต ััะฐััั ะบะฐะฝะฐะปะฐ
2. ะฃะฑะตะดะธัะตัั ะฒ ะฝะฐะปะธัะธะธ ัะฐะทัะตัะตะฝะธะน
3. ะัะพะฒะตัััะต ัะพัะผะฐั ัะพะพะฑัะตะฝะธั

## ๐ ะะพัะพะฒะพ!

ะขะตะฟะตัั ั ะฒะฐั ะตััั ะฟะพะปะฝะพัะตะฝะฝะฐั multi-channel ัะธััะตะผะฐ BotCraft!

**ะงัะพ ะฒั ะฟะพะปััะธะปะธ:**
- โ ะะดะธะฝัะน ะฑัะบะตะฝะด ะดะปั ััะตั ะบะฐะฝะฐะปะพะฒ
- โ ะะฒัะพะผะฐัะธัะตัะบะพะต ัะฟัะฐะฒะปะตะฝะธะต ะบะฐะฝะฐะปะฐะผะธ
- โ Webhook ะฟะพะดะดะตัะถะบะฐ ะดะปั ะฟัะพะดะฐะบัะตะฝะฐ
- โ ะฃะฝะธัะธัะธัะพะฒะฐะฝะฝัะน ะธะฝัะตััะตะนั ะฝะฐัััะพะนะบะธ
- โ ะัะพะฒะตัะบะฐ ัะฐะทัะตัะตะฝะธะน ะธ fallback
- โ ะัะพััะพะต ัะตััะธัะพะฒะฐะฝะธะต ะธ ะผะพะฝะธัะพัะธะฝะณ

**ะกะปะตะดัััะธะต ัะฐะณะธ:**
1. ะะฐัััะพะนัะต ัะตะฐะปัะฝัะต ัะพะบะตะฝั ะฒ touch.env
2. ะัะพัะตััะธััะนัะต ะฒัะต ะบะฐะฝะฐะปั
3. ะะฐัััะพะนัะต webhook URLs ะฒ Meta Developer Console
4. ะะตัะตะฒะตะดะธัะต ะฒ ะฟัะพะดะฐะบัะตะฝ ัะตะถะธะผ

ะฃะดะฐัะธ ั ะฒะฐัะธะผ multi-channel ะะ-ะฐััะธััะตะฝัะพะผ! ๐
